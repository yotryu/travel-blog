import"../chunks/DsnmJJEf.js";import{o as Oe,s as K}from"../chunks/BWE3rs_R.js";import{l as Xe,m as qe,t as p,aj as ie,n as h,B as ne,o as U,q as i,y as w,v as P,w as _,x as Be,u as r,z as e,ak as Ne,A as o,K as X,J as We}from"../chunks/DqVZNpwN.js";import{i as T}from"../chunks/CMLcb2m1.js";import{b as Ie,t as M,e as xe,f as q,s as ke,c as ye,d as Le,i as Ce,a as Se}from"../chunks/BHdDEesX.js";import{s as D,r as Ge,a as Je}from"../chunks/Duc2o9yF.js";import{r as Ke}from"../chunks/PMkriUn2.js";const Ue=async({fetch:I,params:n})=>{let A=await(await I("/collections/all.json")).json();return A=A.sort((R,x)=>R.sortDate.localeCompare(x.sortDate)).reverse(),{collections:A}},xt=Object.freeze(Object.defineProperty({__proto__:null,load:Ue},Symbol.toStringTag,{value:"Module"})),Te="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!--%20Generated%20by%20Pixelmator%20Pro%203.7%20--%3e%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Path'%20fill='none'%20stroke='none'%20d='M%200%200%20L%2048%200%20L%2048%2048%20L%200%2048%20Z'/%3e%3cpath%20id='path1'%20fill='%23ffffff'%20stroke='none'%20d='M%2020%2016%20L%2020%2032%20L%2030%2024%20L%2020%2016%20Z%20M%2038%206%20L%2010%206%20C%207.79%206%206%207.790001%206%2010%20L%206%2038%20C%206%2040.209999%207.79%2042%2010%2042%20L%2038%2042%20C%2040.209999%2042%2042%2040.209999%2042%2038%20L%2042%2010%20C%2042%207.790001%2040.209999%206%2038%206%20Z%20M%2038%2038%20L%2010%2038%20L%2010%2010%20L%2038%2010%20L%2038%2038%20Z'/%3e%3c/svg%3e";var Qe=h('<div class="overlay svelte-wcmplh"><img class="collection-image svelte-wcmplh"/></div>'),Re=h('<div class="overlay svelte-wcmplh"><img class="collection-image svelte-wcmplh"/></div>'),Ve=h('<div class="collection-page svelte-wcmplh" id="image-root"><!> <div class="header svelte-wcmplh" data-sveltekit-reload=""><h1 class="title svelte-wcmplh"><a class="svelte-wcmplh"> </a></h1> <h3 class="small svelte-wcmplh"> </h3></div></div>'),Ye=(I,n)=>i(n,!0),$e=h('<div class="item-dot-selected svelte-wcmplh"></div>'),et=h('<div class="item-dot tooltip svelte-wcmplh"><span class="tooltiptext svelte-wcmplh"> </span></div>'),tt=h("<div><!></div>"),at=h('<div class="overlay-bottom svelte-wcmplh"><div class="svelte-wcmplh"></div></div>'),lt=h('<div class="collection-div svelte-wcmplh"><button class="collection-button svelte-wcmplh"><img loading="lazy"/> <p class="small collection-title svelte-wcmplh"> </p></button></div>'),st=h('<div class="collection-popup svelte-wcmplh"><div class="collection-container svelte-wcmplh"></div></div>'),ot=h('<div class="overlay svelte-wcmplh"></div>'),it=(I,n)=>i(n,!0),nt=(I,n)=>i(n,Number(I.target.value?I.target.value:10),!0),rt=(I,n)=>n(!0),ct=(I,n)=>n(!1),vt=h('<div class="settings-option svelte-wcmplh"><p class="inline-text settings-no-margins svelte-wcmplh">Image duration</p> <input class="settings-input svelte-wcmplh" type="number" min="5" max="600" step="1" size="5"/></div> <div class="settings-option svelte-wcmplh"><button class="text-button settings-full-width svelte-wcmplh">This Collection</button></div> <div class="settings-option svelte-wcmplh"><button class="text-button settings-full-width svelte-wcmplh">All Collections</button></div>',1),dt=(I,n)=>n(),mt=h('<div class="settings-option svelte-wcmplh"><button class="text-button settings-full-width svelte-wcmplh">Stop</button></div>'),_t=h('<div class="overlay svelte-wcmplh"></div>  <div class="settings-container svelte-wcmplh"><h4 class="settings-title">Slideshow</h4> <!></div>',1),gt=h('<div class="overlay svelte-wcmplh"><!> <!></div> <!> <!> <button class="settings-button svelte-wcmplh"><img class="settings-button-image svelte-wcmplh"/></button> <!>',1);function kt(I,n){qe(n,!0);function re(t,a){let l=[...t],g=null;a!=null&&a>=0&&a<t.length&&(g=l.splice(a,1));for(var c=l.length-1;c>0;c--){var f=Math.floor(Math.random()*(c+1)),S=l[c];l[c]=l[f],l[f]=S}return g&&(l=g.concat(l)),l}const Q={duration:200,y:100,opactiy:0};let A=p(0),R=p(0),x=p(0),V=p(!1),z=p(!1),E=p(!1),F=p(-1),Y=p(10),$=p(ie([])),H=-1,ee=Date.now(),B=p(!1),te=p(!1),y=p(ie({})),L=p(ie({})),ae=0,Z=null,N=[];function j(t){ae&&clearTimeout(ae),ae=setTimeout(()=>Pe(),t)}function W(t){const a=t;i(x,a>=0&&a<n.data.collections.length?a:e(x),!0),e(x)==a&&(N=re(n.data.collections[t].titleImages,n.data.collections[t].forceFirstTitleImage),H=-1,j(100))}function ce(t){const a=e(x)+t;W(a)}async function ve(t){try{Z=await navigator.wakeLock.request("screen")}catch{Z=null}i(z,!1),i(E,!1),i(V,!0),i($,t?[n.data.collections[e(x)]]:n.data.collections,!0),i(F,0),H=-1,j(100)}function Me(){if(Z){try{Z.release()}catch{}Z=null}i(V,!1),i(E,!1),i(F,-1),H=-1,j(100)}function De(t){e(z)||Math.abs(t.deltaX)<30||Date.now()-ee<300||(t.deltaX<0?(ce(1),ee=Date.now()):t.deltaX>0&&(ce(-1),ee=Date.now()))}function Pe(){H=(H+1)%N.length,e(B)?e(L).src=N[H]:e(y).src=N[H]}function de(){return e(F)>=0?e(Y)*1e3:1e4}function me(){i(B,!0),i(te,!1),j(de())}function _e(){i(y,new Image,!0),e(y).onload=me,e(y).onerror=_e,j(1e3)}function ge(){i(B,!1),i(te,!0),j(de())}function ue(){i(L,new Image,!0),e(L).onload=ge,e(L).onerror=ue,j(1e3)}Oe(()=>{i(y,new Image,!0),e(y).onload=me,e(y).onerror=_e,i(L,new Image,!0),e(L).onload=ge,e(L).onerror=ue,W(0)});var he=gt();ne("wheel",Ne,t=>De(t));var le=U(he),fe=r(le);{var ze=t=>{const a=X(()=>e(F)>=0?e($)[e(F)]:n.data.collections[e(x)]);var l=Ve(),g=r(l);{var c=s=>{var m=Qe(),C=r(m);o(m),P(()=>{D(C,"src",e(y).src),D(C,"alt",e(y).src)}),M(3,m,()=>q,()=>({duration:1e3})),_(s,m)},f=s=>{var m=We(),C=U(m);{var O=se=>{var J=Re(),oe=r(J);o(J),P(()=>{D(oe,"src",e(L).src),D(oe,"alt",e(L).src)}),M(3,oe,()=>q),M(3,J,()=>q,()=>({duration:1e3})),_(se,J)};T(C,se=>{e(te)&&e(L)&&se(O)},!0)}_(s,m)};T(g,s=>{e(B)&&e(y)?s(c):s(f,!1)})}var S=w(g,2),v=r(S),u=r(v),k=r(u,!0);o(u),o(v);var b=w(v,2),d=r(b,!0);o(b),o(S),o(l),P(s=>{D(u,"href",s),K(k,e(a).title),K(d,e(a).subtitle)},[()=>Ke(`/collection/${e(a).id}`)]),M(3,l,()=>q),_(t,l)};T(fe,t=>{(e(x)>=0||e(F)>=0&&e($).length>0)&&t(ze)})}var Fe=w(fe,2);{var He=t=>{var a=at(),l=r(a);l.__click=[Ye,z],xe(l,21,()=>n.data.collections,Ce,(g,c,f)=>{const S=X(()=>f==n.data.collections.length-1?"item-dot-spacing-last":"item-dot-spacing");var v=tt(),u=r(v);{var k=d=>{var s=$e();M(3,s,()=>Le),_(d,s)},b=d=>{var s=et();s.__click=O=>{W(f),O.stopPropagation()};var m=r(s),C=r(m,!0);o(m),o(s),P(()=>K(C,e(c).title)),M(3,s,()=>Le),_(d,s)};T(u,d=>{e(x)==f?d(k):d(b,!1)})}o(v),P(()=>ke(v,1,ye(e(S)),"svelte-wcmplh")),_(g,v)}),o(l),o(a),M(3,a,()=>Se,()=>Q),_(t,a)};T(Fe,t=>{!e(z)&&!e(V)&&t(He)})}o(le);var pe=w(le,2);{var je=t=>{var a=st(),l=r(a);xe(l,21,()=>n.data.collections,Ce,(g,c,f,S)=>{const v=X(()=>e(c).forceFirstTitleImage>=0?e(c).forceFirstTitleImage:0),u=X(()=>e(c).titleImages[e(v)]),k=X(()=>e(x)==f?"collection-bg-selected":"collection-bg");var b=lt(),d=r(b);d.__click=O=>{W(f),O.stopPropagation()};var s=r(d),m=w(s,2),C=r(m,!0);o(m),o(d),o(b),P(()=>{ke(s,1,ye(e(k)),"svelte-wcmplh"),D(s,"src",e(u)),D(s,"alt",e(c).title),K(C,e(c).title)}),_(g,b)}),o(l),o(a),M(3,a,()=>Se,()=>Q),_(t,a)};T(pe,t=>{e(z)&&t(je)})}var we=w(pe,2);{var Ae=t=>{var a=ot();ne("click",a,()=>i(z,!1),!0),_(t,a)};T(we,t=>{e(z)&&t(Ae)})}var G=w(we,2);G.__click=[it,E];var be=r(G);o(G);var Ee=w(G,2);{var Ze=t=>{var a=_t(),l=U(a),g=w(l,2),c=w(r(g),2);{var f=v=>{var u=vt(),k=U(u),b=w(r(k),2);Ge(b),b.__change=[nt,Y],o(k);var d=w(k,2),s=r(d);s.__click=[rt,ve],o(d);var m=w(d,2),C=r(m);C.__click=[ct,ve],o(m),P(()=>Je(b,e(Y))),_(v,u)},S=v=>{var u=mt(),k=r(u);k.__click=[dt,Me],o(u),_(v,u)};T(c,v=>{e(F)<0?v(f):v(S,!1)})}o(g),ne("click",l,()=>i(E,!1),!0),M(3,g,()=>q),_(t,a)};T(Ee,t=>{e(E)&&t(Ze)})}P(()=>{D(be,"src",Te),D(be,"alt",Te)}),Ie("innerWidth",t=>i(A,t,!0)),Ie("innerHeight",t=>i(R,t,!0)),_(I,he),Be()}Xe(["click","change"]);export{kt as component,xt as universal};
