import"../chunks/DsnmJJEf.js";import{o as vt,s as tt}from"../chunks/Drnj-hpf.js";import{ao as ft,a9 as ut,ap as mt,al as pt,aq as ht,a3 as gt,n as _t,o as wt,v as U,ar as ot,q as X,D as it,y as H,z as bt,A as et,w as b,u as C,B as n,as as Dt,C as h,G as at,x as q,F as yt,t as Et}from"../chunks/Co3hCml5.js";import{i as G}from"../chunks/DPyqPMB2.js";import{e as It,b as st,i as Tt,t as O,s as At,c as Ct,f as R,d as rt}from"../chunks/CXvPUOk9.js";import{s as z}from"../chunks/83Z9ZpwJ.js";import{r as Mt}from"../chunks/By73KE0O.js";function St(e,t,s){ft(()=>{var d=ut(()=>t(e,s?.())||{});if(s&&d?.update){var l=!1,o={};mt(()=>{var r=s();pt(r),l&&ht(o,r)&&(o=r,d.update(r))}),l=!0}if(d?.destroy)return()=>d.destroy()})}const xt=async({fetch:e,params:t})=>{let l=await(await e("/collections/all.json")).json();return l=l.sort((o,r)=>o.sortDate.localeCompare(r.sortDate)).reverse(),{collections:l}},$t=Object.freeze(Object.defineProperty({__proto__:null,load:xt},Symbol.toStringTag,{value:"Module"})),Ht=300,Lt=60,lt="none";function Pt(e){return Array.isArray(e)?e:[e]}function B(e,t,s){return e.addEventListener(t,s),()=>e.removeEventListener(t,s)}function Ut(e,t){return t.filter(s=>e.pointerId!==s.pointerId)}function Xt(e,t,s){const d=e.getBoundingClientRect(),l=Math.round(t.clientX-d.left),o=Math.round(t.clientY-d.top);return{event:t,pointersCount:s.length,target:t.target,x:l,y:o}}function J(e,t,s,d,l){const o=Xt(e,s,d);return e.dispatchEvent(new CustomEvent(`${t}${l}`,{detail:o})),o}function Yt(e,t,s,d,l,o=lt,r=[]){t.style.touchAction=Pt(o).join(" ");let i=[];function M(m){i.push(m);const u=J(t,e,m,i,"down");d?.(i,m),r.forEach(v=>{v.onDown?.(u,i)});const I=m.pointerId;function T(v){if(I===v.pointerId){i=Ut(v,i),i.length||D();const _=J(t,e,v,i,"up");l?.(i,v),r.forEach(w=>{w.onUp?.(_,i)})}}function D(){A(),g(),K(),Q()}const A=B(t,"pointermove",v=>{i=i.map(w=>v.pointerId===w.pointerId?v:w);const _=J(t,e,v,i,"move");r.forEach(w=>{w.onMove?.(_,i)})}),g=B(t,"lostpointercapture",v=>{T(v)}),K=B(t,"pointerup",v=>{T(v)}),Q=B(t,"pointerleave",v=>{i=[],D();const _=J(t,e,v,i,"up");l?.(i,v),r.forEach(w=>{w.onUp?.(_,i)})})}const L=B(t,"pointerdown",M);return{destroy:()=>{L()}}}const kt=(e,t)=>{gt(()=>{const{onDown:s,onUp:d,parameters:l,gestureName:o}=Ot(e,t?.());return Yt(o,e,null,s,d,l.touchAction).destroy})};function Ot(e,t){const s={timeframe:Ht,minSwipeDistance:Lt,touchAction:lt,composed:!1,...t},d="swipe";let l,o,r,i;function M(m,u){o=u.clientX,r=u.clientY,l=Date.now(),m.length===1&&(i=u.target)}function L(m,u){if(u.type==="pointerup"&&m.length===0&&Date.now()-l<s.timeframe){const I=u.clientX-o,T=u.clientY-r,D=Math.abs(I),A=Math.abs(T);let g=null;D>=2*A&&D>s.minSwipeDistance?g=I>0?"right":"left":A>=2*D&&A>s.minSwipeDistance&&(g=T>0?"bottom":"top"),g&&e.dispatchEvent(new CustomEvent(d,{detail:{direction:g,target:i,pointerType:u.pointerType}}))}}return{onDown:M,onUp:L,parameters:s,gestureName:d}}var jt=X('<div class="overlay svelte-h75b8d"><img class="collection-image svelte-h75b8d"/></div>'),Ft=X('<div class="overlay svelte-h75b8d"><img class="collection-image svelte-h75b8d"/></div>'),qt=X('<div class="collection-page svelte-h75b8d" id="image-root"><!> <div class="header svelte-h75b8d" data-sveltekit-reload=""><h1 class="title svelte-h75b8d"><a class="svelte-h75b8d"> </a></h1> <h3 class="small svelte-h75b8d"> </h3></div></div>'),zt=X('<div class="item-dot-selected svelte-h75b8d"></div>'),Bt=X('<div class="item-dot tooltip svelte-h75b8d"><span class="tooltiptext svelte-h75b8d"> </span></div>'),Wt=X("<div><!></div>"),Nt=X('<div class="overlay svelte-h75b8d"><!> <div class="overlay-bottom svelte-h75b8d"></div></div>');function te(e,t){wt(t,!0);function s(a,c){let f=[...a],S=null;c!=null&&c>=0&&c<a.length&&(S=f.splice(c,1));for(var p=f.length-1;p>0;p--){var Y=Math.floor(Math.random()*(p+1)),k=f[p];f[p]=f[Y],f[Y]=k}return S&&(f=S.concat(f)),f}let d=U(0),l=U(0),o=U(0),r=-1,i=Date.now(),M=U(!1),L=U(!1),m=U(ot({})),u=U(ot({})),I=0,T=at(()=>s(t.data.collections[n(o)].titleImages,t.data.collections[n(o)].forceFirstTitleImage));function D(a){I&&clearTimeout(I),I=setTimeout(()=>v(),a)}function A(a){const c=a;C(o,c>=0&&c<t.data.collections.length?c:n(o),!0),n(o)==c&&(r=-1,D(100))}function g(a){const c=n(o)+a;A(c)}function K(a){a.detail.direction=="right"?g(-1):a.detail.direction=="left"&&g(1)}function Q(a){Math.abs(a.deltaX)<30||Date.now()-i<300||(a.deltaX<0?(g(1),i=Date.now()):a.deltaX>0&&(g(-1),i=Date.now()))}function v(){r=(r+1)%n(T).length,I=0,n(M)?n(u).src=n(T)[r]:n(m).src=n(T)[r]}vt(()=>{C(m,new Image,!0),n(m).onload=()=>{C(M,!0),C(L,!1),D(1e4)},C(u,new Image,!0),n(u).onload=()=>{C(M,!1),C(L,!0),D(1e4)},A(0)});var _=Nt();it("wheel",Dt,a=>Q(a));var w=b(_);{var ct=a=>{const c=at(()=>t.data.collections[n(o)]);var f=qt(),S=b(f);{var p=x=>{var P=jt(),W=b(P);h(P),q(()=>{z(W,"src",n(m).src),z(W,"alt",n(m).src)}),O(3,P,()=>R,()=>({duration:1e3})),H(x,P)},Y=x=>{var P=yt(),W=Et(P);{var dt=Z=>{var N=Ft(),$=b(N);h(N),q(()=>{z($,"src",n(u).src),z($,"alt",n(u).src)}),O(3,$,()=>R),O(3,N,()=>R,()=>({duration:1e3})),H(Z,N)};G(W,Z=>{n(L)&&n(u)&&Z(dt)},!0)}H(x,P)};G(S,x=>{n(M)&&n(m)?x(p):x(Y,!1)})}var k=et(S,2),j=b(k),y=b(j),E=b(y,!0);h(y),h(j);var F=et(j,2),V=b(F,!0);h(F),h(k),h(f),q(x=>{z(y,"href",x),tt(E,n(c).title),tt(V,n(c).subtitle)},[()=>Mt(`/collection/${n(c).id}`)]),O(3,f,()=>R),H(a,f)};G(w,a=>{n(o)>=0&&a(ct)})}var nt=et(w,2);It(nt,21,()=>t.data.collections,Tt,(a,c,f)=>{const S=at(()=>f==t.data.collections.length-1?"item-dot-spacing-last":"item-dot-spacing");var p=Wt(),Y=b(p);{var k=y=>{var E=zt();O(3,E,()=>rt),H(y,E)},j=y=>{var E=Bt();E.__click=()=>A(f);var F=b(E),V=b(F,!0);h(F),h(E),q(()=>tt(V,n(c).title)),O(3,E,()=>rt),H(y,E)};G(Y,y=>{n(o)==f?y(k):y(j,!1)})}h(p),q(()=>At(p,1,Ct(n(S)),"svelte-h75b8d")),H(a,p)}),h(nt),h(_),St(_,(a,c)=>kt?.(a,c),()=>()=>({timeframe:200,minSwipeDistance:50,touchAction:"pan-y"})),st("innerWidth",a=>C(d,a,!0)),st("innerHeight",a=>C(l,a,!0)),it("swipe",_,K),H(e,_),bt()}_t(["click"]);export{te as component,$t as universal};
