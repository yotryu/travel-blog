import"../chunks/DsnmJJEf.js";import{ar as B,e as N,as as R,ao as G,at as J,u as K,a7 as Q,a4 as V,ad as T,ak as j,aa as I,a6 as Z,af as x,ae as E,au as $,ai as l,ac as L,ag as g,ab as q,ah as P,aj as k}from"../chunks/D0Tqtvqu.js";import{s as S}from"../chunks/C56lN8Ia.js";import{i as Y}from"../chunks/66sMBkVr.js";import{e as tt,b as O,i as et,r as at,t as U,s as ot,c as nt,f as it,d as F}from"../chunks/BESci3ua.js";import{s as X}from"../chunks/CNeiFLmu.js";function st(a,e,n){B(()=>{var c=N(()=>e(a,n?.())||{});if(n&&c?.update){var t=!1,r={};R(()=>{var v=n();G(v),t&&J(r,v)&&(r=v,c.update(v))}),t=!0}if(c?.destroy)return()=>c.destroy()})}const rt=async({fetch:a,params:e})=>{let t=await(await a("/collections/all.json")).json();return t=t.sort((r,v)=>r.sortDate.localeCompare(v.sortDate)).reverse(),{collections:t}},Ct=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"})),lt=300,ct=60,W="none";function dt(a){return Array.isArray(a)?a:[a]}function C(a,e,n){return a.addEventListener(e,n),()=>a.removeEventListener(e,n)}function vt(a,e){return e.filter(n=>a.pointerId!==n.pointerId)}function pt(a,e,n){const c=a.getBoundingClientRect(),t=Math.round(e.clientX-c.left),r=Math.round(e.clientY-c.top);return{event:e,pointersCount:n.length,target:e.target,x:t,y:r}}function M(a,e,n,c,t){const r=pt(a,n,c);return a.dispatchEvent(new CustomEvent(`${e}${t}`,{detail:r})),r}function ut(a,e,n,c,t,r=W,v=[]){e.style.touchAction=dt(r).join(" ");let i=[];function D(w){i.push(w);const m=M(e,a,w,i,"down");c?.(i,w),v.forEach(s=>{s.onDown?.(m,i)});const o=w.pointerId;function p(s){if(o===s.pointerId){i=vt(s,i),i.length||u();const f=M(e,a,s,i,"up");t?.(i,s),v.forEach(d=>{d.onUp?.(f,i)})}}function u(){_(),h(),y(),b()}const _=C(e,"pointermove",s=>{i=i.map(d=>s.pointerId===d.pointerId?s:d);const f=M(e,a,s,i,"move");v.forEach(d=>{d.onMove?.(f,i)})}),h=C(e,"lostpointercapture",s=>{p(s)}),y=C(e,"pointerup",s=>{p(s)}),b=C(e,"pointerleave",s=>{i=[],u();const f=M(e,a,s,i,"up");t?.(i,s),v.forEach(d=>{d.onUp?.(f,i)})})}const A=C(e,"pointerdown",D);return{destroy:()=>{A()}}}const ft=(a,e)=>{K(()=>{const{onDown:n,onUp:c,parameters:t,gestureName:r}=ht(a,e?.());return ut(r,a,null,n,c,t.touchAction).destroy})};function ht(a,e){const n={timeframe:lt,minSwipeDistance:ct,touchAction:W,composed:!1,...e},c="swipe";let t,r,v,i;function D(w,m){r=m.clientX,v=m.clientY,t=Date.now(),w.length===1&&(i=m.target)}function A(w,m){if(m.type==="pointerup"&&w.length===0&&Date.now()-t<n.timeframe){const o=m.clientX-r,p=m.clientY-v,u=Math.abs(o),_=Math.abs(p);let h=null;u>=2*_&&u>n.minSwipeDistance?h=o>0?"right":"left":_>=2*u&&_>n.minSwipeDistance&&(h=p>0?"bottom":"top"),h&&a.dispatchEvent(new CustomEvent(c,{detail:{direction:h,target:i,pointerType:m.pointerType}}))}}return{onDown:D,onUp:A,parameters:n,gestureName:c}}var mt=T('<div class="collection-page svelte-2hdqvo"><img class="collection-image svelte-2hdqvo"/> <div class="header svelte-2hdqvo" data-sveltekit-reload=""><h1 class="title svelte-2hdqvo"><a class="svelte-2hdqvo"> </a></h1> <h3 class="small svelte-2hdqvo"> </h3></div></div>'),_t=T('<div class="item-dot-selected svelte-2hdqvo"></div>'),wt=T('<div class="item-dot tooltip svelte-2hdqvo"><span class="tooltiptext svelte-2hdqvo"> </span></div>'),gt=T("<div><!></div>"),Dt=T('<div class="overlay svelte-2hdqvo"><!> <div class="overlay-bottom svelte-2hdqvo"></div></div>');function Tt(a,e){V(e,!0);let n=L(0),c=L(0),t=L(0),r=Date.now();function v(o){o.detail.direction=="right"?q(t,l(t)>0?l(t)-1:0,!0):o.detail.direction=="left"&&q(t,l(t)<e.data.collections.length-1?l(t)+1:l(t),!0)}function i(o){Math.abs(o.deltaX)<30||Date.now()-r<300||(o.deltaX<0?(q(t,l(t)<e.data.collections.length-1?l(t)+1:l(t),!0),r=Date.now()):o.deltaX>0&&(q(t,l(t)>0?l(t)-1:0,!0),r=Date.now()))}var D=Dt();j("wheel",$,o=>i(o));var A=E(D);{var w=o=>{const p=k(()=>e.data.collections[l(t)]);var u=mt(),_=E(u),h=x(_,2),y=E(h),b=E(y),s=E(b,!0);g(b),g(y);var f=x(y,2),d=E(f,!0);g(f),g(h),g(u),P(H=>{X(_,"src",l(p).titleImage),X(_,"alt",l(p).titleImage),X(b,"href",H),S(s,l(p).title),S(d,l(p).subtitle)},[()=>at(`/collection/${l(p).id}`)]),U(3,u,()=>it),I(o,u)};Y(A,o=>{l(t)>=0&&o(w)})}var m=x(A,2);tt(m,21,()=>e.data.collections,et,(o,p,u)=>{const _=k(()=>u==e.data.collections.length-1?"item-dot-spacing-last":"item-dot-spacing");var h=gt(),y=E(h);{var b=f=>{var d=_t();U(3,d,()=>F),I(f,d)},s=f=>{var d=wt();d.__click=()=>q(t,u,!0);var H=E(d),z=E(H,!0);g(H),g(d),P(()=>S(z,l(p).title)),U(3,d,()=>F),I(f,d)};Y(y,f=>{l(t)==u?f(b):f(s,!1)})}g(h),P(()=>ot(h,1,nt(l(_)),"svelte-2hdqvo")),I(o,h)}),g(m),g(D),st(D,(o,p)=>ft?.(o,p),()=>()=>({timeframe:200,minSwipeDistance:50,touchAction:"pan-y"})),O("innerWidth",o=>q(n,o,!0)),O("innerHeight",o=>q(c,o,!0)),j("swipe",D,v),I(a,D),Z()}Q(["click"]);export{Tt as component,Ct as universal};
