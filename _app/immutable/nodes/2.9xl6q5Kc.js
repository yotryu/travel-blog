import"../chunks/DsnmJJEf.js";import{as as B,e as N,at as R,ap as V,au as Z,u as G,X as J,V as C,T as I,Y as K,av as Q,$ as E,a2 as l,_ as x,a0 as L,a1 as g,Z as q,W as X,a3 as Y}from"../chunks/Dze4g4ta.js";import{d as $,e as j,s as P}from"../chunks/DF_zWeyH.js";import{i as k}from"../chunks/CtziAB5_.js";import{e as tt,b as O,i as et,r as at,t as S,s as ot,c as nt,f as it,d as W}from"../chunks/D1lYM9xP.js";import{s as U}from"../chunks/COkbwAcS.js";function st(a,e,n){B(()=>{var c=N(()=>e(a,n?.())||{});if(n&&c?.update){var t=!1,r={};R(()=>{var v=n();V(v),t&&Z(r,v)&&(r=v,c.update(v))}),t=!0}if(c?.destroy)return()=>c.destroy()})}const rt=async({fetch:a,params:e})=>{let t=await(await a("/collections/all.json")).json();return t=t.sort((r,v)=>r.sortDate.localeCompare(v.sortDate)).reverse(),{collections:t}},Tt=Object.freeze(Object.defineProperty({__proto__:null,load:rt},Symbol.toStringTag,{value:"Module"})),lt=300,ct=60,F="none";function dt(a){return Array.isArray(a)?a:[a]}function T(a,e,n){return a.addEventListener(e,n),()=>a.removeEventListener(e,n)}function vt(a,e){return e.filter(n=>a.pointerId!==n.pointerId)}function pt(a,e,n){const c=a.getBoundingClientRect(),t=Math.round(e.clientX-c.left),r=Math.round(e.clientY-c.top);return{event:e,pointersCount:n.length,target:e.target,x:t,y:r}}function M(a,e,n,c,t){const r=pt(a,n,c);return a.dispatchEvent(new CustomEvent(`${e}${t}`,{detail:r})),r}function ut(a,e,n,c,t,r=F,v=[]){e.style.touchAction=dt(r).join(" ");let i=[];function D(w){i.push(w);const h=M(e,a,w,i,"down");c?.(i,w),v.forEach(s=>{s.onDown?.(h,i)});const o=w.pointerId;function p(s){if(o===s.pointerId){i=vt(s,i),i.length||u();const f=M(e,a,s,i,"up");t?.(i,s),v.forEach(d=>{d.onUp?.(f,i)})}}function u(){_(),m(),y(),b()}const _=T(e,"pointermove",s=>{i=i.map(d=>s.pointerId===d.pointerId?s:d);const f=M(e,a,s,i,"move");v.forEach(d=>{d.onMove?.(f,i)})}),m=T(e,"lostpointercapture",s=>{p(s)}),y=T(e,"pointerup",s=>{p(s)}),b=T(e,"pointerleave",s=>{i=[],u();const f=M(e,a,s,i,"up");t?.(i,s),v.forEach(d=>{d.onUp?.(f,i)})})}const A=T(e,"pointerdown",D);return{destroy:()=>{A()}}}const ft=(a,e)=>{G(()=>{const{onDown:n,onUp:c,parameters:t,gestureName:r}=mt(a,e?.());return ut(r,a,null,n,c,t.touchAction).destroy})};function mt(a,e){const n={timeframe:lt,minSwipeDistance:ct,touchAction:F,composed:!1,...e},c="swipe";let t,r,v,i;function D(w,h){r=h.clientX,v=h.clientY,t=Date.now(),w.length===1&&(i=h.target)}function A(w,h){if(h.type==="pointerup"&&w.length===0&&Date.now()-t<n.timeframe){const o=h.clientX-r,p=h.clientY-v,u=Math.abs(o),_=Math.abs(p);let m=null;u>=2*_&&u>n.minSwipeDistance?m=o>0?"right":"left":_>=2*u&&_>n.minSwipeDistance&&(m=p>0?"bottom":"top"),m&&a.dispatchEvent(new CustomEvent(c,{detail:{direction:m,target:i,pointerType:h.pointerType}}))}}return{onDown:D,onUp:A,parameters:n,gestureName:c}}var ht=C('<div class="collection-page svelte-2hdqvo"><img class="collection-image svelte-2hdqvo"/> <div class="header svelte-2hdqvo"><h1 class="title svelte-2hdqvo"><a class="svelte-2hdqvo"> </a></h1> <h3 class="small svelte-2hdqvo"> </h3></div></div>'),_t=C('<div class="item-dot-selected svelte-2hdqvo"></div>'),wt=C('<div class="item-dot tooltip svelte-2hdqvo"><span class="tooltiptext svelte-2hdqvo"> </span></div>'),gt=C("<div><!></div>"),Dt=C('<div class="overlay svelte-2hdqvo"><!> <div class="overlay-bottom svelte-2hdqvo"></div></div>');function Ct(a,e){J(e,!0);let n=x(0),c=x(0),t=x(0),r=Date.now();function v(o){o.detail.direction=="right"?q(t,l(t)>0?l(t)-1:0,!0):o.detail.direction=="left"&&q(t,l(t)<e.data.collections.length-1?l(t)+1:l(t),!0)}function i(o){Math.abs(o.deltaX)<30||Date.now()-r<300||(o.deltaX<0?(q(t,l(t)<e.data.collections.length-1?l(t)+1:l(t),!0),r=Date.now()):o.deltaX>0&&(q(t,l(t)>0?l(t)-1:0,!0),r=Date.now()))}var D=Dt();j("wheel",Q,o=>i(o));var A=E(D);{var w=o=>{const p=Y(()=>e.data.collections[l(t)]);var u=ht(),_=E(u),m=L(_,2),y=E(m),b=E(y),s=E(b,!0);g(b),g(y);var f=L(y,2),d=E(f,!0);g(f),g(m),g(u),X(H=>{U(_,"src",l(p).titleImage),U(_,"alt",l(p).titleImage),U(b,"href",H),P(s,l(p).title),P(d,l(p).subtitle)},[()=>at(`/collection/${l(p).id}`)]),S(3,u,()=>it),I(o,u)};k(A,o=>{l(t)>=0&&o(w)})}var h=L(A,2);tt(h,21,()=>e.data.collections,et,(o,p,u)=>{const _=Y(()=>u==e.data.collections.length-1?"item-dot-spacing-last":"item-dot-spacing");var m=gt(),y=E(m);{var b=f=>{var d=_t();S(3,d,()=>W),I(f,d)},s=f=>{var d=wt();d.__click=()=>q(t,u,!0);var H=E(d),z=E(H,!0);g(H),g(d),X(()=>P(z,l(p).title)),S(3,d,()=>W),I(f,d)};k(y,f=>{l(t)==u?f(b):f(s,!1)})}g(m),X(()=>ot(m,1,nt(l(_)),"svelte-2hdqvo")),I(o,m)}),g(h),g(D),st(D,(o,p)=>ft?.(o,p),()=>()=>({timeframe:200,minSwipeDistance:50,touchAction:"pan-y"})),O("innerWidth",o=>q(n,o,!0)),O("innerHeight",o=>q(c,o,!0)),j("swipe",D,v),I(a,D),K()}$(["click"]);export{Ct as component,Tt as universal};
