import"../chunks/DsnmJJEf.js";import{n as ct,o as pt,y as C,t as ut,C as y,u as P,v as _t,A as d,z as a,D as t,F as n,B as e,x as F,w as A,G as gt}from"../chunks/DPC5imJM.js";import{s as k}from"../chunks/BuEnLcKF.js";import{i as G}from"../chunks/-YZ5qXee.js";import{b as Y,e as mt,i as wt,s as Z,t as $,a as tt,r as et}from"../chunks/wQHoaCVF.js";import{s as z}from"../chunks/ClhXHhpr.js";import{I as ft,P as ht}from"../chunks/DGsVxQro.js";const bt=async({fetch:f,params:s})=>{let j=`/posts/${s.slug}.json`,i=await(await f(j)).json();i.contentParagraphs=i.content.split(`
`),i.id=s.slug;let _=(await(await f("/collections/all.json")).json()).find(w=>w.id==i.collection);_||(_={id:"unknown",posts:[],title:"Unknown",parent:""});let h=[],m=[];return _?.posts.forEach(w=>{let b=f(`/posts/${w}.json`).then(l=>l.json()).then(l=>(h.push(l),l));m.push(b)}),await Promise.all(m),h=h.sort((w,I)=>{let b=_.posts.findIndex(g=>g==w.id),l=_.posts.findIndex(g=>g==I.id);return b>l?1:l>b?-1:0}),{post:i,collection:_,collectionPosts:h}},Ot=Object.freeze(Object.defineProperty({__proto__:null,load:bt},Symbol.toStringTag,{value:"Module"}));var xt=C("<p> </p>"),yt=C('<button class="nav-button-prev svelte-1rtdw60" data-sveltekit-reload=""><img class="nav-bg svelte-1rtdw60" alt="prev"/> <a class="nav-title-prev svelte-1rtdw60">&lt; Previous<br/> </a></button>'),Pt=C('<button class="nav-button-next svelte-1rtdw60" data-sveltekit-reload=""><img class="nav-bg svelte-1rtdw60" alt="prev"/> <a class="nav-title-next svelte-1rtdw60">Next &gt;<br/> </a></button>'),kt=C('<div class="overlay svelte-1rtdw60"><div><div class="content svelte-1rtdw60"></div> <div data-sveltekit-reload="" class="svelte-1rtdw60"><table style="width:100%; margin-top:8px;"><tbody><tr><td style="width:50%"><!></td><td style="width:50%; text-align:right;"><!></td></tr></tbody></table></div></div></div>'),Ct=(f,s)=>A(s,!0),jt=C("<div> </div>"),Dt=C('<!> <div class="header svelte-1rtdw60"><h1 class="title svelte-1rtdw60"> </h1> <p class="small svelte-1rtdw60"> </p></div> <!> <!>',1);function Ut(f,s){pt(s,!0);let j=F(0),D=F(0),i=n(()=>t(j)<=t(D)),M=n(()=>t(j)/t(D)>=2),E=n(()=>t(i)?{duration:200,y:100,opactiy:0}:{duration:200,x:100,opacity:0}),_=n(()=>t(i)?"content-container-portrait":"content-container"),h=n(()=>t(i)?"edge-container-portrait":"edge-container"),m=F(!1),w=n(()=>t(m)?t(i)?"expanded-portrait":t(M)?"expanded-ultrawide":"expanded":""),I=n(()=>t(i)?"↑":"←"),b=n(()=>s.data.post.images),l=n(()=>s.data.collectionPosts.findIndex(r=>r.id==s.data.post.id)),g=n(()=>t(l)>0?s.data.collectionPosts[t(l)-1]:null),S=n(()=>t(l)<s.data.collectionPosts.length-1&&t(l)>=0?s.data.collectionPosts[t(l)+1]:null);var T=Dt(),q=ut(T);ft(q,{get imagesData(){return t(b)}});var H=d(q,2),N=a(H),at=a(N,!0);e(N);var J=d(N,2),st=a(J,!0);e(J),e(H);var K=d(H,2);{var lt=r=>{var o=kt(),x=a(o),O=a(x);mt(O,21,()=>s.data.post.contentParagraphs,wt,(v,c)=>{var p=xt(),u=a(p,!0);e(p),y(()=>k(u,t(c))),P(v,p)}),e(O);var L=d(O,2),Q=a(L),R=a(Q),V=a(R),U=a(V),ot=a(U);{var nt=v=>{var c=yt(),p=a(c),u=d(p,2),W=d(a(u),2,!0);e(u),e(c),y(B=>{z(p,"src",t(g).images[0].navSrc),z(u,"href",B),k(W,t(g).title)},[()=>et(`/post/${t(g).id}`)]),P(v,c)};G(ot,v=>{t(g)!=null&&v(nt)})}e(U);var X=d(U),dt=a(X);{var vt=v=>{var c=Pt(),p=a(c),u=d(p,2),W=d(a(u),2,!0);e(u),e(c),y(B=>{z(p,"src",t(S).images[0].navSrc),z(u,"href",B),k(W,t(S).title)},[()=>et(`/post/${t(S).id}`)]),P(v,c)};G(dt,v=>{t(S)!=null&&v(vt)})}e(X),e(V),e(R),e(Q),e(L),e(x),e(o),y(()=>Z(x,1,`${t(_)??""} ${t(w)??""}`,"svelte-1rtdw60")),gt("click",o,()=>A(m,!1),!0),$(3,x,()=>tt,()=>t(E)),P(r,o)},rt=r=>{var o=jt();o.__click=[Ct,m];var x=a(o,!0);e(o),y(()=>{Z(o,1,t(h),"svelte-1rtdw60"),k(x,t(I))}),$(3,o,()=>tt,()=>t(E)),P(r,o)};G(K,r=>{t(m)?r(lt):r(rt,!1)})}var it=d(K,2);ht(it,{get postNavData(){return s.data}}),y(()=>{k(at,s.data.post.title),k(st,s.data.post.date)}),Y("innerWidth",r=>A(j,r,!0)),Y("innerHeight",r=>A(D,r,!0)),P(f,T),_t()}ct(["click"]);export{Ut as component,Ot as universal};
