import"../chunks/DsnmJJEf.js";import{a7 as ct,a4 as pt,ad as j,a9 as _t,ah as P,aa as y,a6 as ut,af as d,ae as e,ai as t,aj as n,ag as a,ac as T,ab as E,ak as gt}from"../chunks/D0Tqtvqu.js";import{s as k}from"../chunks/C56lN8Ia.js";import{i as q}from"../chunks/66sMBkVr.js";import{b as Y,e as mt,i as ft,s as Z,t as $,a as tt,r as at}from"../chunks/BESci3ua.js";import{s as z}from"../chunks/CNeiFLmu.js";import{I as ht,P as wt}from"../chunks/DMpo2pzb.js";const bt=async({fetch:h,params:s})=>{let C=`/posts/${s.slug}.json`,i=await(await h(C)).json();i.contentParagraphs=i.content.split(`
`),i.id=s.slug;let u=(await(await h("/collections/all.json")).json()).find(f=>f.id==i.collection);u||(u={id:"unknown",posts:[],title:"Unknown",parent:""});let w=[],m=[];return u?.posts.forEach(f=>{let b=h(`/posts/${f}.json`).then(l=>l.json()).then(l=>(w.push(l),l));m.push(b)}),await Promise.all(m),w=w.sort((f,I)=>{let b=u.posts.findIndex(g=>g==f.id),l=u.posts.findIndex(g=>g==I.id);return b>l?1:l>b?-1:0}),{post:i,collection:u,collectionPosts:w}},Ut=Object.freeze(Object.defineProperty({__proto__:null,load:bt},Symbol.toStringTag,{value:"Module"}));var xt=j("<p> </p>"),Pt=j('<button class="nav-button-prev svelte-1rtdw60" data-sveltekit-reload=""><img class="nav-bg svelte-1rtdw60" alt="prev"/> <a class="nav-title-prev svelte-1rtdw60">&lt; Previous<br/> </a></button>'),yt=j('<button class="nav-button-next svelte-1rtdw60" data-sveltekit-reload=""><img class="nav-bg svelte-1rtdw60" alt="prev"/> <a class="nav-title-next svelte-1rtdw60">Next &gt;<br/> </a></button>'),kt=j('<div class="overlay svelte-1rtdw60"><div><div class="content svelte-1rtdw60"></div> <div data-sveltekit-reload="" class="svelte-1rtdw60"><table style="width:100%; margin-top:8px;"><tbody><tr><td style="width:50%"><!></td><td style="width:50%; text-align:right;"><!></td></tr></tbody></table></div></div></div>'),jt=(h,s)=>E(s,!0),Ct=j("<div> </div>"),Dt=j('<!> <div class="header svelte-1rtdw60"><h1 class="title svelte-1rtdw60"> </h1> <p class="small svelte-1rtdw60"> </p></div> <!> <!>',1);function Wt(h,s){pt(s,!0);let C=T(0),D=T(0),i=n(()=>t(C)<=t(D)),B=n(()=>t(C)/t(D)>=2),H=n(()=>t(i)?{duration:200,y:100,opactiy:0}:{duration:200,x:100,opacity:0}),u=n(()=>t(i)?"content-container-portrait":"content-container"),w=n(()=>t(i)?"edge-container-portrait":"edge-container"),m=T(!1),f=n(()=>t(m)?t(i)?"expanded-portrait":t(B)?"expanded-ultrawide":"expanded":""),I=n(()=>t(i)?"↑":"←"),b=n(()=>s.data.post.images),l=n(()=>s.data.collectionPosts.findIndex(r=>r.id==s.data.post.id)),g=n(()=>t(l)>0?s.data.collectionPosts[t(l)-1]:null),S=n(()=>t(l)<s.data.collectionPosts.length-1&&t(l)>=0?s.data.collectionPosts[t(l)+1]:null);var F=Dt(),G=_t(F);ht(G,{get imagesData(){return t(b)}});var N=d(G,2),O=e(N),et=e(O,!0);a(O);var J=d(O,2),st=e(J,!0);a(J),a(N);var K=d(N,2);{var lt=r=>{var o=kt(),x=e(o),U=e(x);mt(U,21,()=>s.data.post.contentParagraphs,ft,(v,c)=>{var p=xt(),_=e(p,!0);a(p),P(()=>k(_,t(c))),y(v,p)}),a(U);var L=d(U,2),Q=e(L),R=e(Q),V=e(R),W=e(V),ot=e(W);{var nt=v=>{var c=Pt(),p=e(c),_=d(p,2),A=d(e(_),2,!0);a(_),a(c),P(M=>{z(p,"src",t(g).images[0].navSrc),z(_,"href",M),k(A,t(g).title)},[()=>at(`/post/${t(g).id}`)]),y(v,c)};q(ot,v=>{t(g)!=null&&v(nt)})}a(W);var X=d(W),dt=e(X);{var vt=v=>{var c=yt(),p=e(c),_=d(p,2),A=d(e(_),2,!0);a(_),a(c),P(M=>{z(p,"src",t(S).images[0].navSrc),z(_,"href",M),k(A,t(S).title)},[()=>at(`/post/${t(S).id}`)]),y(v,c)};q(dt,v=>{t(S)!=null&&v(vt)})}a(X),a(V),a(R),a(Q),a(L),a(x),a(o),P(()=>Z(x,1,`${t(u)??""} ${t(f)??""}`,"svelte-1rtdw60")),gt("click",o,()=>E(m,!1),!0),$(3,x,()=>tt,()=>t(H)),y(r,o)},rt=r=>{var o=Ct();o.__click=[jt,m];var x=e(o,!0);a(o),P(()=>{Z(o,1,t(w),"svelte-1rtdw60"),k(x,t(I))}),$(3,o,()=>tt,()=>t(H)),y(r,o)};q(K,r=>{t(m)?r(lt):r(rt,!1)})}var it=d(K,2);wt(it,{get postNavData(){return s.data}}),P(()=>{k(et,s.data.post.title),k(st,s.data.post.date)}),Y("innerWidth",r=>E(C,r,!0)),Y("innerHeight",r=>E(D,r,!0)),y(h,F),ut()}ct(["click"]);export{Wt as component,Ut as universal};
