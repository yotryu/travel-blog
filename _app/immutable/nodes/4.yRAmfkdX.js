import"../chunks/DsnmJJEf.js";import{J as ct,f as k,G as pt,I as w,a as y,K as _t,S as t,T as n,Q as d,R as a,P as e,O as W,M as O}from"../chunks/BUSN7n1A.js";import{d as ut,s as q,e as ht}from"../chunks/C14f3j4c.js";import{i as A}from"../chunks/DthaDnZY.js";import{I as gt,P as mt,b as Y,e as ft,i as bt,s as Z,t as $,a as tt,r as et}from"../chunks/CGox9-_R.js";import{s as S}from"../chunks/BKN54I3y.js";const xt=async({fetch:f,params:s})=>{let j=`/posts/${s.slug}.json`,i=await(await f(j)).json();i.contentParagraphs=i.content.split(`
`),i.id=s.slug;let u=(await(await f("/collections/all.json")).json()).find(m=>m.id==i.collection);u||(u={id:"unknown",posts:[],title:"Unknown",parent:""});let b=[],g=[];return u?.posts.forEach(m=>{let x=f(`/posts/${m}.json`).then(l=>l.json()).then(l=>(b.push(l),l));g.push(x)}),await Promise.all(g),b=b.sort((m,D)=>{let x=u.posts.findIndex(h=>h==m.id),l=u.posts.findIndex(h=>h==D.id);return x>l?1:l>x?-1:0}),{post:i,collection:u,collectionPosts:b}},Ht=Object.freeze(Object.defineProperty({__proto__:null,load:xt},Symbol.toStringTag,{value:"Module"}));var Pt=k("<p> </p>"),wt=k('<button class="nav-button-prev svelte-eqoh66" data-sveltekit-reload=""><img class="nav-bg svelte-eqoh66" alt="prev"/> <a class="nav-title-prev svelte-eqoh66">&lt; Previous<br/> </a></button>'),yt=k('<button class="nav-button-next svelte-eqoh66" data-sveltekit-reload=""><img class="nav-bg svelte-eqoh66" alt="prev"/> <a class="nav-title-next svelte-eqoh66">Next &gt;<br/> </a></button>'),qt=k('<div class="overlay svelte-eqoh66"><div><div class="content svelte-eqoh66"></div> <div data-sveltekit-reload="" class="svelte-eqoh66"><table style="width:100%; margin-top:8px;"><tbody><tr><td style="width:50%"><!></td><td style="width:50%; text-align:right;"><!></td></tr></tbody></table></div></div></div>'),kt=(f,s)=>O(s,!0),jt=k("<div> </div>"),Ct=k('<!> <div class="header svelte-eqoh66"><h1 class="title svelte-eqoh66"> </h1> <p class="small svelte-eqoh66"> </p></div> <!> <!>',1);function Mt(f,s){ct(s,!0);let j=W(0),C=W(0),i=n(()=>t(j)<=t(C)),G=n(()=>t(j)/t(C)>=2),z=n(()=>t(i)?{duration:200,y:100,opactiy:0}:{duration:200,x:100,opacity:0}),u=n(()=>t(i)?"content-container-portrait":"content-container"),b=n(()=>t(i)?"edge-container-portrait":"edge-container"),g=W(!1),m=n(()=>t(g)?t(i)?"expanded-portrait":t(G)?"expanded-ultrawide":"expanded":""),D=n(()=>t(i)?"↑":"←"),x=n(()=>s.data.post.images),l=n(()=>s.data.collectionPosts.findIndex(o=>o.id==s.data.post.id)),h=n(()=>t(l)>0?s.data.collectionPosts[t(l)-1]:null),I=n(()=>t(l)<s.data.collectionPosts.length-1&&t(l)>=0?s.data.collectionPosts[t(l)+1]:null);var J=Ct(),K=pt(J);gt(K,{get imagesData(){return t(x)}});var E=d(K,2),H=a(E),at=a(H,!0);e(H);var Q=d(H,2),st=a(Q,!0);e(Q),e(E);var R=d(E,2);{var lt=o=>{var r=qt(),P=a(r),M=a(P);ft(M,21,()=>s.data.post.contentParagraphs,bt,(v,c)=>{var p=Pt(),_=a(p,!0);e(p),w(()=>q(_,t(c))),y(v,p)}),e(M);var B=d(M,2),F=a(B),L=a(F),V=a(L),N=a(V),rt=a(N);{var nt=v=>{var c=wt(),p=a(c),_=d(p,2),T=d(a(_),2,!0);e(_),e(c),w(U=>{S(p,"src",t(h).images[0].navSrc),S(_,"href",U),q(T,t(h).title)},[()=>et(`/post/${t(h).id}`)]),y(v,c)};A(rt,v=>{t(h)!=null&&v(nt)})}e(N);var X=d(N),dt=a(X);{var vt=v=>{var c=yt(),p=a(c),_=d(p,2),T=d(a(_),2,!0);e(_),e(c),w(U=>{S(p,"src",t(I).images[0].navSrc),S(_,"href",U),q(T,t(I).title)},[()=>et(`/post/${t(I).id}`)]),y(v,c)};A(dt,v=>{t(I)!=null&&v(vt)})}e(X),e(V),e(L),e(F),e(B),e(P),e(r),w(()=>Z(P,1,`${t(u)??""} ${t(m)??""}`,"svelte-eqoh66")),ht("click",r,()=>O(g,!1),!0),$(3,P,()=>tt,()=>t(z)),y(o,r)},ot=o=>{var r=jt();r.__click=[kt,g];var P=a(r,!0);e(r),w(()=>{Z(r,1,t(b),"svelte-eqoh66"),q(P,t(D))}),$(3,r,()=>tt,()=>t(z)),y(o,r)};A(R,o=>{t(g)?o(lt):o(ot,!1)})}var it=d(R,2);mt(it,{get postNavData(){return s.data}}),w(()=>{q(at,s.data.post.title),q(st,s.data.post.date)}),Y("innerWidth",o=>O(j,o,!0)),Y("innerHeight",o=>O(C,o,!0)),y(f,J),_t()}ut(["click"]);export{Mt as component,Ht as universal};
